<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Countdown Timer</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Inter',sans-serif;background:#0a0a0f;color:#e0e0e0;min-height:100vh;display:flex;flex-direction:column;align-items:center;overflow-x:hidden}
.back{position:fixed;top:20px;left:20px;color:#888;text-decoration:none;font-size:.9rem;z-index:10;transition:color .2s}.back:hover{color:#a78bfa}
h1{font-size:clamp(1.8rem,4vw,2.8rem);font-weight:900;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-top:60px;text-align:center}
.setup{margin-top:40px;display:flex;flex-direction:column;gap:16px;align-items:center;width:90%;max-width:500px}
.setup input{width:100%;padding:14px 18px;border-radius:12px;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.05);color:#fff;font-family:'Inter',sans-serif;font-size:1rem;outline:none;transition:border-color .2s}
.setup input:focus{border-color:#a855f7}
.setup input[type="datetime-local"]::-webkit-calendar-picker-indicator{filter:invert(1) brightness(.7)}
.btn{padding:14px 32px;border:none;border-radius:12px;background:linear-gradient(135deg,#6366f1,#a855f7);color:#fff;font-family:'Inter',sans-serif;font-size:1rem;font-weight:600;cursor:pointer;transition:transform .2s,box-shadow .2s}
.btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(99,102,241,.4)}
.countdown-wrap{display:none;flex-direction:column;align-items:center;margin-top:60px;width:90%}
.event-name{font-size:clamp(1.2rem,3vw,1.8rem);font-weight:700;color:#c4b5fd;margin-bottom:32px;text-align:center}
.digits{display:flex;gap:clamp(8px,2vw,24px);justify-content:center;flex-wrap:wrap}
.unit{display:flex;flex-direction:column;align-items:center;gap:8px}
.flip-card{position:relative;width:clamp(70px,15vw,120px);height:clamp(80px,18vw,140px);perspective:600px}
.flip-inner{width:100%;height:100%;position:relative}
.flip-top,.flip-bottom{position:absolute;width:100%;height:50%;overflow:hidden;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);display:flex;align-items:center;justify-content:center}
.flip-top{top:0;border-radius:16px 16px 0 0;border-bottom:1px solid rgba(0,0,0,.4);align-items:flex-end;padding-bottom:0}
.flip-bottom{bottom:0;border-radius:0 0 16px 16px;align-items:flex-start;padding-top:0}
.flip-top span,.flip-bottom span{font-size:clamp(2rem,6vw,4.5rem);font-weight:900;background:linear-gradient(180deg,#fff,#a78bfa);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1}
.flip-top span{transform:translateY(50%)}
.flip-bottom span{transform:translateY(-50%)}
.unit-label{font-size:clamp(.7rem,1.5vw,.9rem);font-weight:600;color:#888;text-transform:uppercase;letter-spacing:2px}
.tick{animation:tick .3s ease-out}
@keyframes tick{0%{transform:scaleY(.85)}50%{transform:scaleY(1.05)}100%{transform:scaleY(1)}}
.share-row{margin-top:40px;display:none;gap:12px;align-items:center;flex-wrap:wrap;justify-content:center}
.share-url{padding:10px 16px;border-radius:10px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);color:#a78bfa;font-size:.85rem;max-width:400px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer}
.share-url:hover{background:rgba(255,255,255,.08)}
.done-msg{display:none;flex-direction:column;align-items:center;gap:16px;margin-top:60px}
.done-msg h2{font-size:clamp(1.5rem,4vw,3rem);font-weight:900;background:linear-gradient(135deg,#f43f5e,#f97316,#eab308);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
canvas#confetti{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:100}
.reset-btn{margin-top:30px;padding:10px 24px;border:1px solid rgba(255,255,255,.15);border-radius:10px;background:transparent;color:#888;font-family:'Inter',sans-serif;cursor:pointer;font-size:.9rem;transition:color .2s}.reset-btn:hover{color:#fff}
</style>
</head>
<body>
<a href="../" class="back">‚Üê Back</a>
<h1>‚è≥ Countdown Timer</h1>
<canvas id="confetti"></canvas>

<div class="setup" id="setup">
<input type="text" id="eventName" placeholder="Event name (e.g. New Year's Eve)">
<input type="datetime-local" id="eventDate">
<button class="btn" onclick="startCountdown()">Start Countdown</button>
</div>

<div class="countdown-wrap" id="countdownWrap">
<div class="event-name" id="eventLabel"></div>
<div class="digits">
<div class="unit"><div class="flip-card" id="daysCard"><div class="flip-inner"><div class="flip-top"><span id="daysTop">00</span></div><div class="flip-bottom"><span id="daysBot">00</span></div></div></div><div class="unit-label">Days</div></div>
<div class="unit"><div class="flip-card" id="hoursCard"><div class="flip-inner"><div class="flip-top"><span id="hoursTop">00</span></div><div class="flip-bottom"><span id="hoursBot">00</span></div></div></div><div class="unit-label">Hours</div></div>
<div class="unit"><div class="flip-card" id="minsCard"><div class="flip-inner"><div class="flip-top"><span id="minsTop">00</span></div><div class="flip-bottom"><span id="minsBot">00</span></div></div></div><div class="unit-label">Minutes</div></div>
<div class="unit"><div class="flip-card" id="secsCard"><div class="flip-inner"><div class="flip-top"><span id="secsTop">00</span></div><div class="flip-bottom"><span id="secsBot">00</span></div></div></div><div class="unit-label">Seconds</div></div>
</div>
<div class="share-row" id="shareRow">
<div class="share-url" id="shareUrl" onclick="copyShare()" title="Click to copy"></div>
</div>
<button class="reset-btn" onclick="resetTimer()">Reset</button>
</div>

<div class="done-msg" id="doneMsg">
<h2>üéâ Time's Up!</h2>
<div class="event-name" id="doneLabel"></div>
<button class="reset-btn" onclick="resetTimer()">New Countdown</button>
</div>

<script>
let interval,targetDate,prev={d:'',h:'',m:'',s:''};

function loadFromHash(){
  const h=decodeURIComponent(location.hash.slice(1));
  if(!h)return;
  const [name,iso]=h.split('|');
  if(name&&iso&&!isNaN(new Date(iso))){
    document.getElementById('eventName').value=name;
    document.getElementById('eventDate').value=iso;
    startCountdown();
  }
}

function startCountdown(){
  const name=document.getElementById('eventName').value.trim()||'Countdown';
  const dateVal=document.getElementById('eventDate').value;
  if(!dateVal)return alert('Pick a date!');
  targetDate=new Date(dateVal);
  if(targetDate<=new Date())return alert('Pick a future date!');
  location.hash=encodeURIComponent(name+'|'+dateVal);
  document.getElementById('eventLabel').textContent=name;
  document.getElementById('doneLabel').textContent=name;
  document.getElementById('setup').style.display='none';
  document.getElementById('countdownWrap').style.display='flex';
  const url=location.href;
  document.getElementById('shareUrl').textContent='üîó '+url;
  document.getElementById('shareRow').style.display='flex';
  prev={d:'',h:'',m:'',s:''};
  tick();
  interval=setInterval(tick,1000);
}

function tick(){
  const now=new Date(),diff=targetDate-now;
  if(diff<=0){clearInterval(interval);showDone();return}
  const d=Math.floor(diff/864e5),h=Math.floor(diff%864e5/36e5),m=Math.floor(diff%36e5/6e4),s=Math.floor(diff%6e4/1e3);
  setUnit('days',pad(d),prev.d);setUnit('hours',pad(h),prev.h);setUnit('mins',pad(m),prev.m);setUnit('secs',pad(s),prev.s);
  prev={d:pad(d),h:pad(h),m:pad(m),s:pad(s)};
}

function pad(n){return String(n).padStart(2,'0')}

function setUnit(id,val,old){
  document.getElementById(id+'Top').textContent=val;
  document.getElementById(id+'Bot').textContent=val;
  if(val!==old){const card=document.getElementById(id+'Card');card.classList.remove('tick');void card.offsetWidth;card.classList.add('tick')}
}

function showDone(){
  document.getElementById('countdownWrap').style.display='none';
  document.getElementById('doneMsg').style.display='flex';
  fireConfetti();
}

function resetTimer(){
  clearInterval(interval);location.hash='';
  document.getElementById('countdownWrap').style.display='none';
  document.getElementById('doneMsg').style.display='none';
  document.getElementById('setup').style.display='flex';
  document.getElementById('eventName').value='';document.getElementById('eventDate').value='';
}

function copyShare(){navigator.clipboard.writeText(location.href).then(()=>{const el=document.getElementById('shareUrl');el.textContent='‚úÖ Copied!';setTimeout(()=>el.textContent='üîó '+location.href,1500)})}

// Confetti
function fireConfetti(){
  const cv=document.getElementById('confetti'),ctx=cv.getContext('2d');
  cv.width=innerWidth;cv.height=innerHeight;
  const pieces=[];const colors=['#6366f1','#a855f7','#ec4899','#f43f5e','#f97316','#eab308','#22c55e','#06b6d4'];
  for(let i=0;i<200;i++)pieces.push({x:Math.random()*cv.width,y:Math.random()*cv.height-cv.height,w:Math.random()*10+5,h:Math.random()*6+3,c:colors[Math.floor(Math.random()*colors.length)],vx:(Math.random()-.5)*4,vy:Math.random()*4+2,r:Math.random()*360,rv:(Math.random()-.5)*8});
  let frames=0;
  function draw(){
    ctx.clearRect(0,0,cv.width,cv.height);
    pieces.forEach(p=>{ctx.save();ctx.translate(p.x,p.y);ctx.rotate(p.r*Math.PI/180);ctx.fillStyle=p.c;ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h);ctx.restore();p.x+=p.vx;p.y+=p.vy;p.vy+=.1;p.r+=p.rv});
    frames++;if(frames<300)requestAnimationFrame(draw);else ctx.clearRect(0,0,cv.width,cv.height);
  }
  draw();
}

window.addEventListener('resize',()=>{const cv=document.getElementById('confetti');cv.width=innerWidth;cv.height=innerHeight});
loadFromHash();
</script>
</body>
</html>
